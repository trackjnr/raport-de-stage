import{logEvent}from"../../utils/utils.js";import domSelectors from"../../config/domSelectors.js";let modalOpen=!1,modalConfirm=!1;export async function launchModal(e){logEvent("test_start","Début de l'ouverture de la modale.");try{if(!e||!e.name)throw new Error("Données du photographe invalides ou manquantes.");logEvent("info","Données du photographe valides.",{photographerData:e});const o=document.getElementById("modal-overlay"),a=document.getElementById("contact-modal");if(!o||!a)throw new Error("Éléments DOM requis pour la modale introuvables.");const t=a.querySelector(".modal-photographer-name");t?(t.textContent=`${e.name}`,logEvent("info","Nom du photographe inséré dans la modale.")):logEvent("warn","Impossible de trouver l'élément pour insérer le nom."),o.classList.add("modal-active"),a.classList.add("modal-active"),document.body.classList.add("no-scroll"),logEvent("success","Modale affichée avec succès.")}catch(e){logEvent("error","Erreur lors de l'ouverture de la modale.",{message:e.message,stack:e.stack})}modalOpen=!0,logEvent("test_end","Fin de l'ouverture de la modale.")}export async function closeModal(){logEvent("test_start","Début de la tentative de fermeture de la modale.");try{logEvent("info","Vérification de l'état de la modale...");const e=document.getElementById("modal-overlay"),o=document.getElementById("contact-modal"),a=document.getElementById("confirmation-modal");if(!modalOpen||!o?.classList?.contains("modal-active"))return void logEvent("warn","Modale déjà fermée ou état incohérent.",{modalOpen:modalOpen,modalClasses:o?.classList?.value||"Inexistant"});e&&e.classList?(e.classList.remove("modal-active"),logEvent("info","Classe 'modal-active' supprimée de l'overlay.")):logEvent("warn","Overlay introuvable ou invalide."),o&&o.classList?(o.classList.remove("modal-active"),logEvent("info","Classe 'modal-active' supprimée de la modale.")):logEvent("warn","Modale principale introuvable ou invalide."),a&&a.classList?(a.classList.remove("modal-active"),logEvent("info","Classe 'modal-active' supprimée de la modale de confirmation.")):logEvent("warn","Aucune modale de confirmation active à fermer."),document.body.classList.contains("no-scroll")&&(document.body.classList.remove("no-scroll"),logEvent("success","Défilement réactivé.")),modalOpen=!1,logEvent("info","État global de la modale mis à jour : 'fermé'.",{modalOpen:modalOpen})}catch(e){logEvent("error","Erreur lors de la fermeture de la modale.",{message:e.message,stack:e.stack})}logEvent("test_end","Fin de la tentative de fermeture de la modale.")}export function openConfirmationModal(){logEvent("test_start","Début de l'ouverture de la modale de confirmation.");try{const{container:e}=domSelectors.modal.confirmationModal;if(!e)throw logEvent("error","Élément DOM de la modale de confirmation introuvable."),new Error("L'élément 'confirmation-modal' est introuvable.");if(modalConfirm)return void logEvent("warn","La modale de confirmation est déjà ouverte (via modalConfirm).");if(e.classList.contains("modal-active"))return logEvent("warn","La modale de confirmation est déjà ouverte (via DOM)."),void(modalConfirm=!0);e.classList.add("modal-active"),e.setAttribute("aria-hidden","false"),modalConfirm=!0,logEvent("success","Modale de confirmation affichée avec succès.",{modalClasses:e.classList.value})}catch(e){logEvent("error","Erreur lors de l'ouverture de la modale de confirmation.",{message:e.message,stack:e.stack})}logEvent("test_end","Fin de l'ouverture de la modale de confirmation.")}export function closeConfirmationModal(){logEvent("test_start","Début de la fermeture de la modale de confirmation.");try{const{container:e}=domSelectors.modal.confirmationModal,{formElement:o}=domSelectors.modal.form;if(!e||!modalConfirm)return void logEvent("warn","La modale de confirmation est déjà fermée ou introuvable.");e.classList.remove("modal-active"),e.setAttribute("aria-hidden","true"),o?(o.reset(),logEvent("info","Formulaire réinitialisé avec succès.")):logEvent("warn","Aucun formulaire à réinitialiser."),modalConfirm=!1,logEvent("success","Modale de confirmation masquée avec succès.",{modalClasses:e.classList.value})}catch(e){logEvent("error","Erreur lors de la fermeture de la modale de confirmation.",{message:e.message,stack:e.stack})}logEvent("test_end","Fin de la fermeture de la modale de confirmation.")}export function showSpamModal(){try{if(!domSelectors?.spamModal?.container)throw logEvent("error","Impossible de trouver la modale anti-spam."),new Error("Élément 'spamModal.container' introuvable.");const{MODAL_ACTIVE:e,BODY_NO_SCROLL:o}=domSelectors.CSS_CLASSES,{container:a}=domSelectors.spamModal;a.classList.contains(e)?logEvent("warn","La modale anti-spam est déjà active."):(a.classList.add(e),a.setAttribute("aria-hidden","false"),logEvent("info","Modale anti-spam activée.")),document.body.classList.contains(o)?logEvent("warn","Le défilement est déjà désactivé."):(document.body.classList.add(o),logEvent("info","Défilement désactivé pour l'affichage de la modale anti-spam."))}catch(e){logEvent("error","Erreur lors de l'affichage de la modale anti-spam.",{message:e.message,stack:e.stack})}}export function closeSpamModal(){try{const{container:e,closeButton:o}=domSelectors.modal.spamModal,{MODAL_ACTIVE:a,BODY_NO_SCROLL:t}=domSelectors.CSS_CLASSES;if(!e)throw logEvent("error","Impossible de trouver le conteneur de la modale anti-spam."),new Error("Élément 'spamModal.container' introuvable.");if(!e.classList.contains(a))return void logEvent("warn","La modale anti-spam est déjà fermée.");e.classList.remove(a),e.setAttribute("aria-hidden","true"),logEvent("info","Modale anti-spam masquée."),document.body.classList.contains(t)?(document.body.classList.remove(t),logEvent("info","Défilement réactivé après fermeture de la modale anti-spam.")):logEvent("warn","Le défilement était déjà activé."),o?(o.removeEventListener("click",closeSpamModal),logEvent("info","Écouteur d'événement supprimé du bouton de fermeture.")):logEvent("warn","Aucun bouton de fermeture défini pour la modale anti-spam.")}catch(e){logEvent("error","Erreur lors de la fermeture de la modale anti-spam.",{message:e.message,stack:e.stack})}}